# 技术决策文档

记录SS_SC_IOT项目的关键技术决策和选型理由。

## 1. 开发语言和框架选择

### HLS-Communication服务开发栈

**决策：** 使用.NET 8 + C# 进行HLS-Communication服务开发

**决策时间：** 2025-08-26

**理由：**

- **.NET 8性能优势**：最新的LTS版本，性能和内存管理优化
- **跨平台支持**：支持Windows/Linux部署
- **HslCommunication库兼容性**：与.NET 8完全兼容
- **现代C#特性**：支持最新的C# 12语言特性
- **容器化友好**：原生支持Docker容器化部署
- **长期支持**：.NET 8是LTS版本，支持到2026年

### Node-RED环境

**决策：** Node.js 18+ LTS + Node-RED 3.1.x

**理由：**

- **稳定性**：经过验证的数据流编排平台
- **生态系统**：丰富的节点库和社区支持
- **可视化编程**：非程序员友好的图形化界面

## 2. 通信架构决策

### 跨语言通信方案

**决策：** TCP Socket + JSON协议

**架构：**

```
Node-RED (Node.js) <---> TCP Socket <---> HLS-Communication (.NET 8)
                          (JSON消息)
```

**理由：**

- **简单可靠**：TCP协议成熟稳定
- **跨平台兼容**：在Windows/Linux上行为一致
- **JSON易读性**：便于调试和日志记录
- **性能适中**：满足工业应用的性能要求
- **防火墙友好**：易于网络配置和安全管理

## 3. 项目结构决策

### 双进程架构

**决策：** 独立的HLS-Communication后台服务 + Node-RED前端

**优势：**

- **故障隔离**：一个进程崩溃不影响另一个
- **独立部署**：可以分别升级和维护
- **资源优化**：各自优化内存和CPU使用
- **技术选型自由度**：每个服务使用最适合的技术栈

## 4. 待确认的技术决策

### HslCommunication具体版本

- **状态：** 待调研和选择
- **考虑因素：** .NET 8兼容性、功能完整性、社区活跃度

### 数据序列化格式

- **候选：** JSON vs Protocol Buffers
- **倾向：** JSON（开发阶段），后续可优化为Protocol Buffers

### 持久化存储

- **状态：** 待确定是否需要
- **候选：** SQLite、PostgreSQL、文件存储

## 5. 性能和安全考虑

### 性能目标

- **IPC延迟：** <10ms（本地通信）
- **并发连接：** 支持10+客户端
- **吞吐量：** 1000+消息/秒

### 安全措施

- **网络绑定：** 仅localhost（127.0.0.1）
- **访问控制：** 基础的API密钥验证
- **日志审计：** 操作日志记录

---

_文档维护者：开发团队_  
_最后更新：2025-08-26_
