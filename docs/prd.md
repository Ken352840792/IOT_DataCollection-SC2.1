# 产品需求文档（PRD）：设备数据采集框架

**项目名称：** 滠水采集服务  
**简称：** SS_SC_IOT

## 引言
本文档描述了设备数据采集框架项目的详细产品需求。该项目旨在开发一个“数采盒子”硬件及其配套软件，以解决制造企业中设备数据协议多样化的问题，并实现数据的统一采集、处理与传输。

## 核心需求
本项目的核心是开发一个数采盒子及其内部的软件，该软件将作为数据采集与控制的核心。

### 功能需求
设备数据采集

核心功能：数采盒子能够通过集成的 hlscommunication 框架，从各类工业设备采集原始数据。

用户故事：作为一个系统管理员，我希望能够通过简单的配置，使数采盒子能够连接不同协议类型的设备，并开始采集数据。

数据预处理与编排

核心功能：利用 Node-RED 在数采盒子内部实现数据流的编排和预处理。

用户故事：作为一个自动化工程师，我希望能够使用 Node-RED 的图形化界面，拖拽定制化的节点，来配置数据清洗、格式转换和计算逻辑。

设备反向控制

核心功能：Node-RED 能够接收指令，并通过 hlscommunication 框架将指令发送到现场设备，实现反向控制（反控）。

用户故事：作为一个远程控制工程师，我希望能够在 Node-RED 的界面上触发一个指令，来远程启动或停止某个设备。

### 技术需求与挑战
Node-RED 定制节点

核心需求：开发一个或多个 Node-RED 节点，用于桥接 Node.js 环境与 hlscommunication 框架（C# 或 Java）。

用户故事：作为一个开发者，我希望有一个封装好的 Node-RED 节点，可以直接在 Node-RED 流中调用 hlscommunication 的采集和反控功能。

技术挑战：需要找到或开发一种有效的跨语言通信机制，如通过进程间通信（IPC）、API 接口或 gRPC 等方式，使 Node.js 能够调用 C# 或 Java 代码。

可扩展性

核心需求：框架设计应具备良好的可扩展性，便于未来集成新的设备协议或功能模块，而无需修改核心代码。

## 验收标准
功能验收

Node-RED 定制节点：该节点能够成功调用 hlscommunication 框架，并获取指定设备的数据。

设备反控：Node-RED 能够成功下发指令到现场设备，并能控制设备的启动或停止。

性能验收

实时性：数据采集和反控指令的传输应满足工业现场对实时性的基本要求。

稳定性：系统应能在长时间运行后保持稳定，无内存泄漏或其他资源问题。